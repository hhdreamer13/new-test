{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import Form from\"./common/form\";import Joi from\"joi-browser\";import*as userService from\"../services/userService\";import auth from\"../services/authService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterForm=/*#__PURE__*/function(_Form){_inherits(RegisterForm,_Form);var _super=_createSuper(RegisterForm);function RegisterForm(){var _this;_classCallCheck(this,RegisterForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{username:\"\",password:\"\",name:\"\"},errors:{}};_this.schema={username:Joi.string().min(5).required().label(\"Username\").email(),password:Joi.string().min(5).required().label(\"Password\"),name:Joi.string().required().label(\"Name\")};_this.doSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,errors;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userService.register(_this.state.data);case 3:response=_context.sent;auth.loginWithJwt(response.headers[\"x-auth-token\"]);window.location=\"/\";_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0.response&&_context.t0.response.status===400){errors=_objectSpread({},_this.state.errors);errors.username=_context.t0.response.data;_this.setState({errors:errors});}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _this;}_createClass(RegisterForm,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[this.renderInput(\"username\",\"Username\"),this.renderInput(\"password\",\"Password\",\"password\"),this.renderInput(\"name\",\"Name\"),this.renderButton(\"Register\")]})]});}}]);return RegisterForm;}(Form);export default RegisterForm;","map":{"version":3,"names":["React","Component","Form","Joi","userService","auth","RegisterForm","state","data","username","password","name","errors","schema","string","min","required","label","email","doSubmit","register","response","loginWithJwt","headers","window","location","status","setState","handleSubmit","renderInput","renderButton"],"sources":["/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/src/components/registerForm.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"./common/form\";\nimport Joi from \"joi-browser\";\nimport * as userService from \"../services/userService\";\nimport auth from \"../services/authService\";\n\nclass RegisterForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\", name: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    username: Joi.string().min(5).required().label(\"Username\").email(),\n    password: Joi.string().min(5).required().label(\"Password\"),\n    name: Joi.string().required().label(\"Name\"),\n  };\n\n  doSubmit = async () => {\n    try {\n      const response = await userService.register(this.state.data);\n      auth.loginWithJwt(response.headers[\"x-auth-token\"]);\n      window.location = \"/\";\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Register</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"username\", \"Username\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderInput(\"name\", \"Name\")}\n          {this.renderButton(\"Register\")}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default RegisterForm;\n"],"mappings":"87BAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAOC,KAAI,KAAM,eAAe,CAChC,MAAOC,IAAG,KAAM,aAAa,CAC7B,MAAO,GAAKC,YAAW,KAAM,yBAAyB,CACtD,MAAOC,KAAI,KAAM,yBAAyB,CAAC,2FAErCC,aAAY,yUAChBC,KAAK,CAAG,CACNC,IAAI,CAAE,CAAEC,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAC9CC,MAAM,CAAE,CAAC,CACX,CAAC,OAEDC,MAAM,CAAG,CACPJ,QAAQ,CAAEN,GAAG,CAACW,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU,CAAC,CAACC,KAAK,EAAE,CAClER,QAAQ,CAAEP,GAAG,CAACW,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAACC,KAAK,CAAC,UAAU,CAAC,CAC1DN,IAAI,CAAER,GAAG,CAACW,MAAM,EAAE,CAACE,QAAQ,EAAE,CAACC,KAAK,CAAC,MAAM,CAC5C,CAAC,OAEDE,QAAQ,wEAAG,+LAEgBf,YAAW,CAACgB,QAAQ,CAAC,MAAKb,KAAK,CAACC,IAAI,CAAC,QAAtDa,QAAQ,eACdhB,IAAI,CAACiB,YAAY,CAACD,QAAQ,CAACE,OAAO,CAAC,cAAc,CAAC,CAAC,CACnDC,MAAM,CAACC,QAAQ,CAAG,GAAG,CAAC,+EAEtB,GAAI,YAAGJ,QAAQ,EAAI,YAAGA,QAAQ,CAACK,MAAM,GAAK,GAAG,CAAE,CACvCd,MAAM,kBAAQ,MAAKL,KAAK,CAACK,MAAM,EACrCA,MAAM,CAACH,QAAQ,CAAG,YAAGY,QAAQ,CAACb,IAAI,CAClC,MAAKmB,QAAQ,CAAC,CAAEf,MAAM,CAANA,MAAO,CAAC,CAAC,CAC3B,CAAC,oEAEJ,gEAED,iBAAS,CACP,mBACE,oCACE,gCAAiB,cACjB,cAAM,QAAQ,CAAE,IAAI,CAACgB,YAAa,WAC/B,IAAI,CAACC,WAAW,CAAC,UAAU,CAAE,UAAU,CAAC,CACxC,IAAI,CAACA,WAAW,CAAC,UAAU,CAAE,UAAU,CAAE,UAAU,CAAC,CACpD,IAAI,CAACA,WAAW,CAAC,MAAM,CAAE,MAAM,CAAC,CAChC,IAAI,CAACC,YAAY,CAAC,UAAU,CAAC,GACzB,GACH,CAEV,CAAC,0BAtCwB5B,IAAI,EAyC/B,cAAeI,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}