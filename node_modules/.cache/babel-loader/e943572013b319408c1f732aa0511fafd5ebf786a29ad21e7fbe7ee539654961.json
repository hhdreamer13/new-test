{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import http from\"./httpService\";import config from\"../config.json\";import jwtDecode from\"jwt-decode\";var apiUrl=config.apiUrl+\"/auth\";var tokenKey=\"token\";http.setJwt(getJwt());export function login(_x,_x2){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var _yield$http$post,jwt;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return http.post(apiUrl,{email:email,password:password});case 2:_yield$http$post=_context.sent;jwt=_yield$http$post.data;localStorage.setItem(tokenKey,jwt);case 5:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}export function loginWithJwt(jwt){localStorage.setItem(tokenKey,jwt);}export function logout(){localStorage.removeItem(tokenKey);}export function getCurrentUser(){try{var jwt=localStorage.getItem(tokenKey);return jwtDecode(jwt);}catch(ex){return null;}}export function getJwt(){return localStorage.getItem(tokenKey);}export default{login:login,logout:logout,getCurrentUser:getCurrentUser,loginWithJwt:loginWithJwt,getJwt:getJwt};","map":{"version":3,"names":["http","config","jwtDecode","apiUrl","tokenKey","setJwt","getJwt","login","email","password","post","jwt","data","localStorage","setItem","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex"],"sources":["/Users/hooman/Desktop/Hh Coding/_iCoding/Demo/vidly/src/services/authService.js"],"sourcesContent":["import http from \"./httpService\";\nimport config from \"../config.json\";\nimport jwtDecode from \"jwt-decode\";\n\nconst apiUrl = config.apiUrl + \"/auth\";\nconst tokenKey = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function login(email, password) {\n  const { data: jwt } = await http.post(apiUrl, { email, password });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport default {\n  login,\n  logout,\n  getCurrentUser,\n  loginWithJwt,\n  getJwt,\n};\n"],"mappings":"kSAAA,MAAOA,KAAI,KAAM,eAAe,CAChC,MAAOC,OAAM,KAAM,gBAAgB,CACnC,MAAOC,UAAS,KAAM,YAAY,CAElC,GAAMC,OAAM,CAAGF,MAAM,CAACE,MAAM,CAAG,OAAO,CACtC,GAAMC,SAAQ,CAAG,OAAO,CAExBJ,IAAI,CAACK,MAAM,CAACC,MAAM,EAAE,CAAC,CAErB,eAAsBC,MAAK,8CAG1B,mFAHM,iBAAqBC,KAAK,CAAEC,QAAQ,mKACbT,KAAI,CAACU,IAAI,CAACP,MAAM,CAAE,CAAEK,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAAC,uCAApDE,GAAG,kBAATC,IAAI,CACZC,YAAY,CAACC,OAAO,CAACV,QAAQ,CAAEO,GAAG,CAAC,CAAC,sDACrC,wCAED,MAAO,SAASI,aAAY,CAACJ,GAAG,CAAE,CAChCE,YAAY,CAACC,OAAO,CAACV,QAAQ,CAAEO,GAAG,CAAC,CACrC,CAEA,MAAO,SAASK,OAAM,EAAG,CACvBH,YAAY,CAACI,UAAU,CAACb,QAAQ,CAAC,CACnC,CAEA,MAAO,SAASc,eAAc,EAAG,CAC/B,GAAI,CACF,GAAMP,IAAG,CAAGE,YAAY,CAACM,OAAO,CAACf,QAAQ,CAAC,CAC1C,MAAOF,UAAS,CAACS,GAAG,CAAC,CACvB,CAAE,MAAOS,EAAE,CAAE,CACX,MAAO,KAAI,CACb,CACF,CAEA,MAAO,SAASd,OAAM,EAAG,CACvB,MAAOO,aAAY,CAACM,OAAO,CAACf,QAAQ,CAAC,CACvC,CAEA,cAAe,CACbG,KAAK,CAALA,KAAK,CACLS,MAAM,CAANA,MAAM,CACNE,cAAc,CAAdA,cAAc,CACdH,YAAY,CAAZA,YAAY,CACZT,MAAM,CAANA,MACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}